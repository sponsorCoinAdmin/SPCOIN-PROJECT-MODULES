echo "EXECUTING . ~/.spCoinEnv/spCOINsetup"
. ~/.spCoinEnv/.a

alias cloneproj="clear;  setSpCoinEnv; cloneSponsorCoinProjects;"


alias initSpCoinEnv="export CLONE_PROJECT_LOG=CLONE_PROJECT.log ;
              	     export ACTIVE_PROJECT_NAME=SPCOIN-PROJECT-MODULES ;
	             export ACTIVE_PROJECT_ROOT=\$PWD ;
	             export ACTIVE_PROJECT_HOME=\$PWD/\$ACTIVE_PROJECT_NAME"

alias clearSpCoinEnv="export CLONE_PROJECT_LOG= ;
                      export ACTIVE_PROJECT_NAME= ;
		      export ACTIVE_PROJECT_ROOT= ;
		      export ACTIVE_PROJECT_HOME= "

alias echoSpCoinEnv="echo CLONE_PROJECT_LOG=\$CLONE_PROJECT_LOG;
                     echo ACTIVE_PROJECT_NAME=\$ACTIVE_PROJECT_NAME ;
	             echo ACTIVE_PROJECT_ROOT=\$ACTIVE_PROJECT_ROOT ;
	             echo ACTIVE_PROJECT_HOME=\$ACTIVE_PROJECT_HOME "

alias cloneproj="clear; cloneSponsorCoinProjects;"
alias cdspc="cd ~/spcoin/\$SPCOIN-PROJECT-MODULES"

junk() {
    echo EXECUTING JUNK FUNCTION
}

evalInstallScript () {
    local scriptName=$1
    echo "========================== $scriptName ==============================="
    shift;  # will remove first arg from the "$@"
    local "CURR_DIR=$PWD"
    echo CURR_DIR: $CURR_DIR
    echo EXECUTING: "cd $ACTIVE_PROJECT_HOME"
    cd $ACTIVE_PROJECT_HOME
    echo "IN PROJECT ROOT DIRECTORY: $PWD"
    echo "EXECUTING INSTALL SCRIPT: eval $@"
    eval "$@"
    cd $CURR_DIR
    echo RESTORED DIRECTORY LOCATION: $CURR_DIR
}

installGitModules() {
    clear
    echo "============================ initSpCoinEnv ==============================="
    initSpCoinEnv
    echoSpCoinEnv
    echo "========================= installGitModules ==============================="
    echo PROJECT PARENT DIR: $PWD
    script="git clone --recurse-submodules git@github.com:sponsorCoinAdmin/$ACTIVE_PROJECT_NAME.git"
    echo "EXECUTING INSTALL SCRIPT: eval $script"
    eval "$script"
}

installSecurityKeys() {
    script="cp -f ~/SECURITY/.env spcoin-hardhat-contract-access-test"
    evalInstallScript "installSecurityKeys" $script
    script="cp -f ~/SECURITY/.env.local ./spcoin-nextjs-front-end"
    evalInstallScript "installSecurityKeys" $script
}

installAliases() {
    script=". ./scripts/setupEnvAliases.sh"
    evalInstallScript "installAliases" $script
}

installNodeModules() {
    script=". ./scripts/installNodeModules.sh"
    evalInstallScript "installNodeModules" $script
}


cloneSponsorCoinProjects() {
    initSpCoinEnv
    installGitModules   2>&1 | tee    $CLONE_PROJECT_LOG
    installSecurityKeys 2>&1 | tee -a $CLONE_PROJECT_LOG
    installAliases      2>&1 | tee -a $CLONE_PROJECT_LOG
    installNodeModules  2>&1 | tee -a $CLONE_PROJECT_LOG
    echo "EXECUTING: setroot";
    setroot
}

#########################################################################
